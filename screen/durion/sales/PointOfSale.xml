<?xml version="1.0" encoding="UTF-8"?>
<screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-3.xsd"
        default-menu-title="Point of Sale" default-menu-index="1">

    <transition name="createOrder">
        <service-call name="durion.sales.DurSaleOrderServices.create#SaleOrder"/>
        <default-response url="."/>
    </transition>

    <transition name="addItem">
        <service-call name="durion.sales.DurSaleOrderServices.add#OrderItem"/>
        <default-response url="."/>
    </transition>

    <actions>
        <entity-find entity-name="durion.sales.DurSaleOrder" list="recentOrders">
            <search-form-inputs default-order-by="-orderDate"/>
            <econdition field-name="status" operator="in" from="['new', 'processing']"/>
            <select-field field-name="orderId,orderDate,customerName,totalAmount,status"/>
        </entity-find>
    </actions>

    <widgets>
        <container>
            <label text="Point of Sale Terminal" type="h2"/>
            
            <form-single name="CreateOrderForm" transition="createOrder">
                <field name="customerId"><default-field><text-line/></default-field></field>
                <field name="customerName"><default-field><text-line/></default-field></field>
                <field name="notes"><default-field><text-area rows="3"/></default-field></field>
                <field name="submitButton"><default-field title="Create Order">
                    <submit/>
                </default-field></field>
            </form-single>

            <container-box>
                <box-header title="Recent Orders"/>
                <box-body>
                    <form-list name="RecentOrdersList" list="recentOrders">
                        <field name="orderId"><default-field><display/></default-field></field>
                        <field name="orderDate"><default-field><display format="yyyy-MM-dd HH:mm"/></default-field></field>
                        <field name="customerName"><default-field><display/></default-field></field>
                        <field name="totalAmount"><default-field><display format="#,##0.00"/></default-field></field>
                        <field name="status"><default-field><display/></default-field></field>
                    </form-list>
                </box-body>
            </container-box>
        </container>
    </widgets>

</screen>
